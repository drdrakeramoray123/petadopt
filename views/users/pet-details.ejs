<html>
    <head>
        <%- include("../includes/head") %> 
        <title>Pet Details</title>
        <script src="/scripts/imageGallerySelector.js" defer></script>
    </head>
    <body class="bg-slate-200">
        <%- include("../includes/navbar") %>
        <!-- Details -->
        <section class="text-gray-600 body-font overflow-hidden">
            <div class="container mx-auto">
                <div class="lg:w-4/5 mx-auto flex flex-wrap">
                    <section class="pt-12 rounded-b-10xl overflow-hidden">
                        <div class="container px-4 mx-auto">
                            <div class="flex flex-wrap -mx-4">
                                <%- include("../includes/breadcrumb", {type:
                                petData.type, breed: petData.breed}) %>
                                <div class="w-full lg:w-1/2 px-4 py-8">
                                    <% if(petData.images.length > 0) { %>
                                    <%- include("../includes/image-gallery", {
                                    images: petData.images, suffix: "public"}) %>
                                    <% } %>
                                </div>
                                <div class="w-full lg:w-1/2 px-4">
                                    <div class="w-full mb-6">
                                        <h2
                                            class="mt-6 mb-4 text-xl md:text-2xl lg:text-3xl font-heading font-medium"
                                        >
                                            <%= petData.name %>
                                        </h2>
                                        <p class="flex items-center mb-6">
                                            <span
                                                class="mr-2 text-3xl text-gray-600 font-medium"
                                                >$</span
                                            >
                                            <span
                                                class="text-3xl text-indigo-500 font-medium"
                                            >
                                                <%= petData.price %>
                                            </span>
                                        </p>
                                        <p
                                            class="text-lg text-blue-400 underline text-justify"
                                        >
                                            <a href="/user/<%= petData.uid %>">
                                                Owner
                                            </a>
                                        </p>
                                        <p
                                            class="text-lg text-gray-400 text-justify"
                                        >
                                            <%= petData.description %>
                                        </p>
                                    </div>
                                    <div class="flex flex-wrap">
                                        <span
                                            class="mb-3 text-lg w-full lg:w-1/2"
                                        >
                                            <span>Age:</span>
                                            <span class="text-gray-400"
                                                ><%= petData.age %>
                                            </span>
                                        </span>
                                        <span
                                            class="mb-3 text-lg w-full lg:w-1/2"
                                        >
                                            <span>Gender:</span>
                                            <span class="text-gray-400"
                                                ><%- petData.gender
                                                === "male" ? "<i class='fas fa-mars'</i>" :
                                                "<i class='fas fa-venus'</i>" %>
                                                </i>
                                            </span>
                                        </h4>
                                    </div>
                                    <div class="mb-6">
                                        <h4
                                            class="mb-3 font-heading font-medium"
                                        >
                                            <span>Color:</span>
                                            <span class="text-gray-400"
                                                ><%= petData?.color != null ? petData.color.charAt(0).toUpperCase() + petData.color.slice(1) : "" %></span
                                            >
                                        </h4>
                                    </div>
                                    <div class="flex flex-wrap -mx-2 mb-12">
                                        <div
                                            class="w-full md:w-2/3 px-2 mb-2 md:mb-0"
                                        >
                                            <a
                                                class="block py-2 px-2 leading-8 font-heading font-medium tracking-tighter text-xl text-white text-center <%= petData.uid == locals.uid ? 'bg-gray-500' : 'bg-indigo-500 focus:ring-2 focus:ring-indigo-500 focus:ring-opacity-50 hover:bg-indigo-600'%> rounded-xl"
                                                href="<%= petData.uid != locals.uid ? '/pet-details/' : '#' %><%= petData.uid != locals.uid ? petData._id + '/adopt' : '' %>"
                                            >
                                                <%= petData.price !== "0" ? "Buy"
                                                : "Adopt" %>
                                            </a>
                                        </div>
                                        <div class="w-full md:w-1/3 px-2">
                                            <a
                                                class="flex w-full py-2 px-2 items-center justify-center leading-8 font-heading font-medium tracking-tighter text-xl text-center bg-white focus:ring-2 focus:ring-gray-200 focus:ring-opacity-50 hover:bg-opacity-60 rounded-xl"
                                                href="/wishlist/<%= petData._id %>"
                                            >
                                                <span class="mr-2"
                                                    >Wishlist</span
                                                >
                                                <i class="fa-heart <%= isWishlisted ? "fas text-red-600" : "far" %> "></i>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                                <div class="w-full px-4">
                                    <div>
                                        <h4 class="mb-6 text-2xl">
                                            More information
                                        </h4>
                                        <hr />
                                        <div class="flex flex-wrap">
                                            <details
                                                class="flex w-full lg:w-1/2 pr-6 py-4 mb-2 justify-between items-center leading-7 rounded-2xl border-2 border-gray-200 bg-white p-2"
                                            >
                                                <summary
                                                    class="text-lg font-heading font-medium rounded-md"
                                                >
                                                    Characteristics
                                                </summary>
                                                <span
                                                    class="pl-6 text-justify border-t-2 border-gray-400 py-2"
                                                >
                                                    <%
                                                    if(petData.characteristics && petData.characteristics.length > 0) 
                                                    { for(let characteristic of
                                                    petData.characteristics) {
                                                    %> 
                                                    <i class="fas fa-check"></i>
                                                    <%=
                                                    characteristic.charAt(0).toUpperCase()
                                                    + characteristic.slice(1) %>
                                                    <br />

                                                    <% } %> <% } else { %>
                                                    <span class="text-gray-400">
                                                        No information
                                                    </span>
                                                    <% } %>
                                                </span>
                                            </details>
                                            <details
                                                class="flex w-full lg:w-1/2 pr-6 py-4 mb-2 justify-between items-center leading-7 rounded-2xl border-2 border-gray-200 bg-white p-2"
                                            >
                                                <summary
                                                    class="text-lg font-heading font-medium rounded-md"
                                                >
                                                    Pet Details
                                                </summary>
                                                <span
                                                    class="pl-6 text-justify border-t-2 border-gray-400"
                                                >
                                                    <table class="w-full text-inherit">
                                                        <tr>
                                                            <td class="py-2">Type</td>
                                                            <td class="py-2">
                                                                <a class="text-blue-600" href="/find/<%= petData.type %>">
                                                                    <%= petData.type.charAt(0).toUpperCase() + petData.type.slice(1) %>
                                                                </a>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="py-2">Breed</td>
                                                            <td class="py-2">
                                                                <a class="text-blue-600" href="/info/animal/<%= petData.breed.split("_").map((word) => word.charAt(0).toUpperCase()
                + word.slice(1)).join(" ") %>">
                                                                    <%= petData.breed.split("_").map((word) => word.charAt(0).toUpperCase()
                + word.slice(1)).join(" ") %>
                                                                </a>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="py-2">Age</td>
                                                            <td class="py-2">
                                                                <%= petData.age %>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="py-2">Size</td>
                                                            <td class="py-2">
                                                                <%= petData.size.charAt(0).toUpperCase() + petData.size.slice(1) %>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="py-2">Coat Length</td>
                                                            <td class="py-2">
                                                                <%= petData.coatLength.charAt(0).toUpperCase() + petData.coatLength.slice(1) %>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="py-2">Training</td>
                                                            <td class="py-2">
                                                                <%= petData.trained.charAt(0).toUpperCase() + petData.trained.slice(1) %>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td class="py-2">Vaccinated</td>
                                                            <td class="py-2">
                                                                <%= petData.health.charAt(0).toUpperCase() + petData.health.slice(1) %>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </span>
                                            </details>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </section>
        <!-- End Details -->

        <!-- Find Similar -->
        <section class="text-gray-600 body-font">
            <div class="container px-5 lg:px-24 py-24 mx-auto">
                <div class="flex flex-col text-center w-full mb-20">
                    <h1
                        class="text-2xl font-medium title-font mb-4 text-gray-900 tracking-widest"
                    >
                        SIMILAR PETS
                    </h1>
                </div>
                <div class="flex flex-wrap -m-4">
                    <% if(similarPets) { %>
                        <% for(let similarPet of similarPets) { %>
                            <div class="p-4 md:w-1/2 lg:w-1/3">
                                <a  href="/pet-details/<%= similarPet._id %>">
                                    <div
                                        class="h-full border-2 border-gray-200 border-opacity-60 rounded-lg overflow-hidden"
                                    >
                                        <img
                                            class="lg:h-48 md:h-36 w-full object-cover object-center"
                                            src="<%= similarPet?.images[0]?.replace("public", "") %>"
                                            alt="blog"
                                        />
                                        <div class="p-6">
                                            <h2
                                                class="tracking-widest text-xs title-font font-medium text-gray-400 mb-1"
                                            >
                                                <%= similarPet.type.charAt(0).toUpperCase() + similarPet.type.slice(1) %>
                                            </h2>
                                            <h1
                                                class="title-font text-lg font-medium text-gray-900 mb-3"
                                            >
                                                <%= similarPet.name %>
                                            </h1>
                                            <p class="leading-relaxed mb-3 text-justify">
                                                <%= similarPet?.description?.slice(0, 150) %>...
                                            </p>
                                            <div class="flex items-center flex-wrap">
                                                <a
                                                    href="/pet-details/<%= similarPet._id %>"
                                                    class="text-indigo-500 inline-flex items-center md:mb-2 lg:mb-0"
                                                    >Read More
                                                    <i class="fas fa-arrow-right ml-1"></i>
                                                    
                                                </a>
                                                <span
                                                    class="text-gray-400 mr-3 inline-flex items-center lg:ml-auto md:ml-0 ml-auto leading-none text-sm pr-3 py-1 border-r-2 border-gray-200"
                                                >
                                                    <svg
                                                        class="w-4 h-4 mr-1"
                                                        stroke="currentColor"
                                                        stroke-width="2"
                                                        fill="none"
                                                        stroke-linecap="round"
                                                        stroke-linejoin="round"
                                                        viewBox="0 0 24 24"
                                                    >
                                                        <path
                                                            d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"
                                                        ></path>
                                                        <circle
                                                            cx="12"
                                                            cy="12"
                                                            r="3"
                                                        ></circle></svg
                                                    >1.2K
                                                </span>
                                                <span
                                                    class="text-gray-400 inline-flex items-center leading-none text-sm"
                                                >
                                                    <svg
                                                        class="w-4 h-4 mr-1"
                                                        stroke="currentColor"
                                                        stroke-width="2"
                                                        fill="none"
                                                        stroke-linecap="round"
                                                        stroke-linejoin="round"
                                                        viewBox="0 0 24 24"
                                                    >
                                                        <path
                                                            d="M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z"
                                                        ></path></svg
                                                    >6
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        <% } %>
                    <% } %>
                </div>
            </div>
        </section>
        <!-- End Find Similar -->
        <%- include("../includes/footer") %>
    </body>
</html>
