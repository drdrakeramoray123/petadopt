<!DOCTYPE html>
<html lang="en">
    <head>
        <%- include("../includes/head") %> <%- include("../includes/navbar") %>
        <title>Profile</title>
    </head>
    <body class="bg-slate-200">
        <div class="container mx-auto px-4 pt-8">
            <div class="flex flex-wrap">
                <!-- Sidebar -->
                <section class="w-full md:w-1/6 lg:w-1/4 p-4">
                    <%- include("../includes/sidebar") %>
                </section>
                <!-- End Sidebar -->

                <!-- Main -->
                <section class="w-full h-full md:w-5/6 lg:w-3/4 p-4">
                    <div
                        class="bg-white border-transparent rounded-lg shadow-lg"
                    >
                        <div
                            class="bg-blue-700 border-b-2 border-gray-400 rounded-tl-lg rounded-tr-lg p-2"
                        >
                            <h5 class="font-bold uppercase text-white">
                                Your Profile
                            </h5>
                        </div>
                        <div class="p-6">
                            <!-- User Info Section -->
                            <section
                                class="flex flex-row flex-wrap gap-8 md:gap-12 lg:gap-16 items-center mb-4"
                            >
                                <!-- Avatar -->
                                <% if(userData.image) { %> <img
                                class="rounded-full w-36 h-36 object-cover
                                border-4 shadow-lg border-black" src="<%=
                                userData.image.replace("public","") %>" alt="<%=
                                userData.firstName %> <%= userData.lastName %>
                                Profile Image" /> <% } else { %>
                                <i class="fas fa-user text-2xl"></i>
                                <% } %>
                                <!-- End Avatar -->
                                <!-- Name -->
                                <div
                                    class="flex flex-wrap flex-col flex-grow px-2 w-1/2 lg:w-1/3"
                                >
                                    <span class="text-4xl mb-4">
                                        <%= userData.firstName !== undefined ?
                                        userData.firstName : null %> <%=
                                        userData.middleName !== undefined ?
                                        userData.middleName : null %> <%=
                                        userData.lastName !== undefined ?
                                        userData.lastName : null %>
                                    </span>
                                    <span class="text-lg mb-2">
                                        <strong>Email: </strong>
                                        <%= userData.email !== undefined ?
                                        userData.email : null %>
                                    </span>
                                    <span class="text-lg mb-2">
                                        <strong>Phone Number: </strong>
                                        <%= userData.phoneNumber !== undefined ?
                                        userData.phoneNumber : null %>
                                    </span>
                                    <span class="text-lg mb-2">
                                        <strong>DOB: </strong>
                                        <%= userData.dob !== undefined ?
                                        userData.dob : null %>
                                    </span>
                                </div>
                                <!-- End Name -->
                            </section>
                            <!-- End User Info Section -->
                            <hr />
                            <!-- Address Section -->
                            <section class="flex flex-row flex-wrap my-4">
                                <table class="w-full">
                                    <tr class="flex flex-wrap">
                                        <td class="w-full lg:w-1/4 md:w-1/2">
                                            <strong> Street : </strong>
                                        </td>
                                        <td class="w-full lg:w-1/4 md:w-1/2">
                                            <%= userData.address !== undefined ?
                                            userData.address.street : null %>
                                        </td>
                                        <td class="w-full lg:w-1/4 md:w-1/2">
                                            <strong> City : </strong>
                                        </td>
                                        <td class="w-full lg:w-1/4 md:w-1/2">
                                            <%= userData.address !== undefined ?
                                            userData.address.city : null %>
                                        </td>
                                    </tr>
                                    <tr class="flex flex-wrap">
                                        <td class="w-full lg:w-1/4 md:w-1/2">
                                            <strong> State : </strong>
                                        </td>
                                        <td class="w-full lg:w-1/4 md:w-1/2">
                                            <%= userData.address !== undefined ?
                                            userData.address.state : null %>
                                        </td>
                                        <td class="w-full lg:w-1/4 md:w-1/2">
                                            <strong> Country : </strong>
                                        </td>
                                        <td class="w-full lg:w-1/4 md:w-1/2">
                                            <%= userData.address !== undefined ?
                                            userData.address.country : null %>
                                        </td>
                                    </tr>
                                    <tr class="flex flex-wrap">
                                        <td class="w-full lg:w-1/4 md:w-1/2">
                                            <strong> Postal Code : </strong>
                                        </td>
                                        <td class="w-full lg:w-1/4 md:w-1/2">
                                            <%= userData.address !== undefined ?
                                            userData.address.postalCode : null
                                            %>
                                        </td>
                                    </tr>
                                </table>
                            </section>
                            <!-- End Address Section -->
                            <hr />
                            <!-- Pet Section -->
                            <% if(!locals.isAdmin) { %>
                            <section class="flex flex-row flex-wrap my-4">
                                <% for(let pet of petData) { %>
                                <a
                                    href="/pet-details/<%= pet._id %>"
                                    class="w-full xl:w-1/3 md:w-1/2 p-4"
                                >
                                    <div
                                        class="bg-white border-transparent rounded-lg shadow-lg"
                                    >
                                        <% if(pet.images) { %>
                                        <img
                                            class="w-full rounded-t-lg h-36 object-cover"
                                            src="<%= pet.images[0]?.replace('public','') %>"
                                            alt="<%= pet.name %> Profile Image"
                                        />
                                        <% } else { %>
                                        <i
                                            class="fas fa-dog rounded-t-lg text-6xl p-8 w-full h-36 object-cover bg-gray-800 text-white text-center"
                                        ></i>
                                        <% } %>
                                        <div class="p-6">
                                            <div
                                                class="flex flex-row flex-wrap gap-8 md:gap-12 lg:gap-16 items-center mb-4"
                                            >
                                                <div
                                                    class="flex flex-wrap flex-col flex-grow px-2 w-1/2 lg:w-1/3"
                                                >
                                                    <span
                                                        class="text-2xl mb-4 font-bold"
                                                    >
                                                        <%= pet.name !==
                                                        undefined ? pet.name :
                                                        null %>
                                                    </span>
                                                    <section
                                                        class="flex flex-wrap justify-between gap-1"
                                                    >
                                                        <span
                                                            class="text-lg mb-1"
                                                        >
                                                            <%= pet.breed !==
                                                            undefined ?
                                                            pet.breed.split("_").map((word) => word.charAt(0).toUpperCase()
                + word.slice(1)).join(" ") : null %>
                                                        </span>
                                                        <span
                                                            class="text-lg mb-1"
                                                        >
                                                            <%= pet.age !==
                                                            undefined ? pet.age
                                                            : null %> y
                                                        </span>
                                                        <span
                                                            class="text-lg mb-1"
                                                        >
                                                            $ <%= pet.price !==
                                                            undefined ?
                                                            pet.price : 0
                                                            %>
                                                        </span>
                                                        <span
                                                            class="text-lg mb-1"
                                                        >
                                                        <%- petData.gender
                                                        === "male" ? "<i class='fas fa-mars'</i>" :
                                                        "<i class='fas fa-venus'</i>" %>
                                                        </i>
                                                        </span>
                                                    </section>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                                <% } %>
                            </section>
                            <% } %>
                            <!-- End Pet Section -->
                        </div>
                    </div>
                </section>
                <!-- End Main -->
            </div>
        </div>
        <%- include("../includes/footer") %>
        <script src="https://unpkg.com/create-file-list"></script>
        <script src="/scripts/imagePreview.js"></script>
    </body>
</html>
